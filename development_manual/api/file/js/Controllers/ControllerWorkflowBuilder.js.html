<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">js/Controllers/ControllerWorkflowBuilder.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/ddmal/rodan-client" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Application.js~Application.html">Application</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Configuration">Configuration</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Behaviors</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Behaviors/BehaviorTable.js~BehaviorTable.html">BehaviorTable</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Collections</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/BaseCollection.js~BaseCollection.html">BaseCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/ConnectionCollection.js~ConnectionCollection.html">ConnectionCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/InputPortCollection.js~InputPortCollection.html">InputPortCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/InputPortTypeCollection.js~InputPortTypeCollection.html">InputPortTypeCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/JobCollection.js~JobCollection.html">JobCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/OutputPortCollection.js~OutputPortCollection.html">OutputPortCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/OutputPortTypeCollection.js~OutputPortTypeCollection.html">OutputPortTypeCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/ResourceCollection.js~ResourceCollection.html">ResourceCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/ResourceListCollection.js~ResourceListCollection.html">ResourceListCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/RunJobCollection.js~RunJobCollection.html">RunJobCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/WorkflowCollection.js~WorkflowCollection.html">WorkflowCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/WorkflowJobCollection.js~WorkflowJobCollection.html">WorkflowJobCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/WorkflowJobGroupCollection.js~WorkflowJobGroupCollection.html">WorkflowJobGroupCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/WorkflowRunCollection.js~WorkflowRunCollection.html">WorkflowRunCollection</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Collections/Global</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/Global/GlobalCollection.js~GlobalCollection.html">GlobalCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/Global/GlobalInputPortTypeCollection.js~GlobalInputPortTypeCollection.html">GlobalInputPortTypeCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/Global/GlobalJobCollection.js~GlobalJobCollection.html">GlobalJobCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/Global/GlobalOutputPortTypeCollection.js~GlobalOutputPortTypeCollection.html">GlobalOutputPortTypeCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/Global/GlobalProjectCollection.js~GlobalProjectCollection.html">GlobalProjectCollection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Collections/Global/GlobalResourceTypeCollection.js~GlobalResourceTypeCollection.html">GlobalResourceTypeCollection</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Controllers</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/BaseController.js~BaseController.html">BaseController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerAuthentication.js~ControllerAuthentication.html">ControllerAuthentication</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerContextMenu.js~ControllerContextMenu.html">ControllerContextMenu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerModal.js~ControllerModal.html">ControllerModal</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerProject.js~ControllerProject.html">ControllerProject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerResource.js~ControllerResource.html">ControllerResource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerRunJob.js~ControllerRunJob.html">ControllerRunJob</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerServer.js~ControllerServer.html">ControllerServer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerWorkflow.js~ControllerWorkflow.html">ControllerWorkflow</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerWorkflowBuilder.js~ControllerWorkflowBuilder.html">ControllerWorkflowBuilder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerWorkflowJob.js~ControllerWorkflowJob.html">ControllerWorkflowJob</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerWorkflowJobGroup.js~ControllerWorkflowJobGroup.html">ControllerWorkflowJobGroup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Controllers/ControllerWorkflowRun.js~ControllerWorkflowRun.html">ControllerWorkflowRun</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Managers</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Managers/RadioManager.js~RadioManager.html">RadioManager</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Managers/TransferManager.js~TransferManager.html">TransferManager</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Models</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/BaseModel.js~BaseModel.html">BaseModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/Connection.js~Connection.html">Connection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/InputPort.js~InputPort.html">InputPort</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/InputPortType.js~InputPortType.html">InputPortType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/Job.js~Job.html">Job</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/OutputPort.js~OutputPort.html">OutputPort</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/OutputPortType.js~OutputPortType.html">OutputPortType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/Pagination.js~Pagination.html">Pagination</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/Project.js~Project.html">Project</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/Resource.js~Resource.html">Resource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/ResourceList.js~ResourceList.html">ResourceList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/ResourceType.js~ResourceType.html">ResourceType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/RunJob.js~RunJob.html">RunJob</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/User.js~User.html">User</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/Workflow.js~Workflow.html">Workflow</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/WorkflowJob.js~WorkflowJob.html">WorkflowJob</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/WorkflowJobGroup.js~WorkflowJobGroup.html">WorkflowJobGroup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Models/WorkflowRun.js~WorkflowRun.html">WorkflowRun</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Shared</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Shared/Cookie.js~Cookie.html">Cookie</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Shared/Environment.js~Environment.html">Environment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Shared/ErrorHandler.js~ErrorHandler.html">ErrorHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Shared/EventTimer.js~EventTimer.html">EventTimer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Shared/RODAN_EVENTS.js~RODAN_EVENTS.html">RODAN_EVENTS</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/LayoutViewMaster.js~LayoutViewMaster.html">LayoutViewMaster</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/BaseViewList.js~BaseViewList.html">BaseViewList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/BaseViewListItem.js~BaseViewListItem.html">BaseViewListItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/LayoutViewMain.js~LayoutViewMain.html">LayoutViewMain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/LayoutViewModel.js~LayoutViewModel.html">LayoutViewModel</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/InputPort</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/InputPort/ViewInputPortList.js~ViewInputPortList.html">ViewInputPortList</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Job/List</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Job/List/ViewJobList.js~ViewJobList.html">ViewJobList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Job/List/ViewJobListItem.js~ViewJobListItem.html">ViewJobListItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Login</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Login/ViewLogin.js~ViewLogin.html">ViewLogin</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Project/Individual</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Project/Individual/ViewProject.js~ViewProject.html">ViewProject</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Project/List</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Project/List/ViewProjectList.js~ViewProjectList.html">ViewProjectList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Project/List/ViewProjectListItem.js~ViewProjectListItem.html">ViewProjectListItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Resource/Individual</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Resource/Individual/ViewResource.js~ViewResource.html">ViewResource</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Resource/Individual/ViewResourceTypeListItem.js~ViewResourceTypeListItem.html">ViewResourceTypeListItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Resource/List</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Resource/List/ViewResourceList.js~ViewResourceList.html">ViewResourceList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Resource/List/ViewResourceListAssigned.js~ViewResourceListAssigned.html">ViewResourceListAssigned</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Resource/List/ViewResourceListAvailable.js~ViewResourceListAvailable.html">ViewResourceListAvailable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Resource/List/ViewResourceListItem.js~ViewResourceListItem.html">ViewResourceListItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Resource/List/ViewResourceListItemModal.js~ViewResourceListItemModal.html">ViewResourceListItemModal</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/RunJob/Individual</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/RunJob/Individual/ViewRunJob.js~ViewRunJob.html">ViewRunJob</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/RunJob/List</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/RunJob/List/ViewRunJobList.js~ViewRunJobList.html">ViewRunJobList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/RunJob/List/ViewRunJobListItem.js~ViewRunJobListItem.html">ViewRunJobListItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Workflow/Individual</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Workflow/Individual/ViewWorkflow.js~ViewWorkflow.html">ViewWorkflow</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/Workflow/List</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Workflow/List/ViewWorkflowList.js~ViewWorkflowList.html">ViewWorkflowList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Workflow/List/ViewWorkflowListImportItem.js~ViewWorkflowListImportItem.html">ViewWorkflowListImportItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/Workflow/List/ViewWorkflowListItem.js~ViewWorkflowListItem.html">ViewWorkflowListItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/WorkflowBuilder/ResourceAssignment</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowBuilder/ResourceAssignment/LayoutViewResourceAssignment.js~LayoutViewResourceAssignment.html">LayoutViewResourceAssignment</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/WorkflowJob</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/ViewControlWorkflowJob.js~ViewControlWorkflowJob.html">ViewControlWorkflowJob</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/WorkflowJob/Ports</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/LayoutViewControlPorts.js~LayoutViewControlPorts.html">LayoutViewControlPorts</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/ViewInputPortListItem.js~ViewInputPortListItem.html">ViewInputPortListItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/ViewInputPortTypeList.js~ViewInputPortTypeList.html">ViewInputPortTypeList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/ViewInputPortTypeListItem.js~ViewInputPortTypeListItem.html">ViewInputPortTypeListItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/ViewOutputPortList.js~ViewOutputPortList.html">ViewOutputPortList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/ViewOutputPortListItem.js~ViewOutputPortListItem.html">ViewOutputPortListItem</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/ViewOutputPortTypeList.js~ViewOutputPortTypeList.html">ViewOutputPortTypeList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Ports/ViewOutputPortTypeListItem.js~ViewOutputPortTypeListItem.html">ViewOutputPortTypeListItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/WorkflowJob/Settings</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJob/Settings/ViewSettings.js~ViewSettings.html">ViewSettings</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/WorkflowJobGroup</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowJobGroup/ViewWorkflowJobGroup.js~ViewWorkflowJobGroup.html">ViewWorkflowJobGroup</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/WorkflowRun/Individual</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowRun/Individual/LayoutViewIndividualWorkflowRun.js~LayoutViewIndividualWorkflowRun.html">LayoutViewIndividualWorkflowRun</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Main/WorkflowRun/List</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowRun/List/ViewWorkflowRunList.js~ViewWorkflowRunList.html">ViewWorkflowRunList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Main/WorkflowRun/List/ViewWorkflowRunListItem.js~ViewWorkflowRunListItem.html">ViewWorkflowRunListItem</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">Views/Master/Navigation</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/LayoutViewNavigation.js~LayoutViewNavigation.html">LayoutViewNavigation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/ViewNavigationNode.js~ViewNavigationNode.html">ViewNavigationNode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/ViewNavigationNodeProject.js~ViewNavigationNodeProject.html">ViewNavigationNodeProject</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/ViewNavigationNodeResources.js~ViewNavigationNodeResources.html">ViewNavigationNodeResources</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/ViewNavigationNodeRoot.js~ViewNavigationNodeRoot.html">ViewNavigationNodeRoot</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/ViewNavigationNodeRunJobs.js~ViewNavigationNodeRunJobs.html">ViewNavigationNodeRunJobs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/ViewNavigationNodeWorkflowRuns.js~ViewNavigationNodeWorkflowRuns.html">ViewNavigationNodeWorkflowRuns</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/Views/Master/Navigation/ViewNavigationNodeWorkflows.js~ViewNavigationNodeWorkflows.html">ViewNavigationNodeWorkflows</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NAV_EVENTS">NAV_EVENTS</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/Controllers/ControllerWorkflowBuilder.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import _ from &apos;underscore&apos;;
import BaseCollection from &apos;../Collections/BaseCollection&apos;;
import BaseController from &apos;./BaseController&apos;;
import Configuration from &apos;../Configuration&apos;;
import Connection from &apos;../Models/Connection&apos;;
import RODAN_EVENTS from &apos;../Shared/RODAN_EVENTS&apos;;
import InputPort from &apos;../Models/InputPort&apos;;
import ViewControlWorkflowJob from &apos;../Views/Master/Main/WorkflowJob/ViewControlWorkflowJob&apos;;
import JobCollection from &apos;../Collections/JobCollection&apos;;
import LayoutViewControlPorts from &apos;../Views/Master/Main/WorkflowJob/Ports/LayoutViewControlPorts&apos;;
import LayoutViewResourceAssignment from &apos;../Views/Master/Main/WorkflowBuilder/ResourceAssignment/LayoutViewResourceAssignment&apos;;
import OutputPort from &apos;../Models/OutputPort&apos;;
import Radio from &apos;backbone.radio&apos;;
import Resource from &apos;../Models/Resource&apos;;
import ResourceCollection from &apos;../Collections/ResourceCollection&apos;;
import ResourceList from &apos;../Models/ResourceList&apos;;
import ViewJobList from &apos;../Views/Master/Main/Job/List/ViewJobList&apos;;
import ViewResourceList from &apos;../Views/Master/Main/Resource/List/ViewResourceList&apos;;
import ViewResourceListAssigned from &apos;../Views/Master/Main/Resource/List/ViewResourceListAssigned&apos;;
import ViewResourceListAvailable from &apos;../Views/Master/Main/Resource/List/ViewResourceListAvailable&apos;;
import ViewWorkflow from &apos;../Views/Master/Main/Workflow/Individual/ViewWorkflow&apos;;
import ViewWorkflowList from &apos;../Views/Master/Main/Workflow/List/ViewWorkflowList&apos;;
import ViewWorkflowListImportItem from &apos;../Views/Master/Main/Workflow/List/ViewWorkflowListImportItem&apos;;
import Workflow from &apos;../Models/Workflow&apos;;
import WorkflowCollection from &apos;../Collections/WorkflowCollection&apos;;
import WorkflowJob from &apos;../Models/WorkflowJob&apos;;
import ViewWorkflowJobGroup from &apos;../Views/Master/Main/WorkflowJobGroup/ViewWorkflowJobGroup&apos;;
import ViewSettings from &apos;../Views/Master/Main/WorkflowJob/Settings/ViewSettings&apos;;

/**
 * Controller for the WorkflowBuilder.
 */
export default class ControllerWorkflowBuilder extends BaseController
{
///////////////////////////////////////////////////////////////////////////////////////
// PUBLIC METHODS
///////////////////////////////////////////////////////////////////////////////////////
    /**
     * Initializer.
     */
    initialize()
    {
        this._resourceAssignments = []; // this helps manage the list of resource assignments while building the resource
        this._resourcesAvailable = []; // this is just a cache for resources that will work with a given input port
        this._workflowRunOptions = {};
    }

///////////////////////////////////////////////////////////////////////////////////////
// PRIVATE METHODS
///////////////////////////////////////////////////////////////////////////////////////
    /**
     * Initialize Radio.
     */
    _initializeRadio()
    {
        Radio.channel(&apos;rodan&apos;).on(RODAN_EVENTS.EVENT__WORKFLOWBUILDER_SELECTED, options =&gt; this._handleEventBuilderSelected(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SET_ADDPORTS, options =&gt; this._handleRequestSetAddPorts(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_ADD_CONNECTION, options =&gt; this._handleCommandAddConnection(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_ADD_INPUTPORT, options =&gt; this._handleCommandAddInputPort(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_ADD_OUTPUTPORT, options =&gt; this._handleCommandAddOutputPort(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_ADD_WORKFLOWJOB, options =&gt; this._handleRequestAddWorkflowJob(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_ADD_WORKFLOWJOBGROUP, options =&gt; this._handleRequestAddWorkflowJobGroup(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_ASSIGN_RESOURCE, options =&gt; this._handleRequestAssignResource(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_CREATE_WORKFLOWRUN, options =&gt; this._handleRequestCreateWorkflowRun(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_ADD_DISTRIBUTOR, options =&gt; this._handleRequestCreateDistributor(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_REMOVE_CONNECTION, options =&gt; this._handleRequestDeleteConnection(options), this); 
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_REMOVE_INPUTPORT, options =&gt; this._handleCommandDeleteInputPort(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_REMOVE_OUTPUTPORT, options =&gt; this._handleCommandDeleteOutputPort(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_REMOVE_WORKFLOWJOB, options =&gt; this._handleRequestDeleteWorkflowJob(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_REMOVE_WORKFLOWJOBGROUP, options =&gt; this._handleRequestDeleteWorkflowJobGroup(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_GET_RESOURCEASSIGNMENTS, options =&gt; this._handleRequestGetResourceAssignments(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_IMPORT_WORKFLOW, options =&gt; this._handleRequestImportWorkflow(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_LOAD_WORKFLOW, options =&gt; this._handleEventLoadWorkflow(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_JOBCOLLECTION_VIEW, options =&gt; this._handleRequestShowJobListView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_RESOURCEASSIGNMENT_VIEW, options =&gt; this._handleRequestShowResourceAssignmentView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_WORKFLOWCOLLECTION_VIEW, options =&gt; this._handleRequestShowWorkflowListView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_WORKFLOW_VIEW, options =&gt; this._handleRequestShowWorkflowView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_WORKFLOWJOB_VIEW, options =&gt; this._handleRequestShowWorkflowJobView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_WORKFLOWJOB_PORTS_VIEW, options =&gt; this._handleRequestShowWorkflowJobPortsView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_WORKFLOWJOB_SETTINGS_VIEW, options =&gt; this._handleRequestShowWorkflowJobSettingsView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_SHOW_WORKFLOWJOBGROUP_VIEW, options =&gt; this._handleRequestShowWorkflowJobGroupView(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_UNASSIGN_RESOURCE, options =&gt; this._handleRequestUnassignResource(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_UNGROUP_WORKFLOWJOBGROUP, options =&gt; this._handleRequestWorkflowJobGroupUngroup(options), this);
        Radio.channel(&apos;rodan&apos;).reply(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, options =&gt; this._handleRequestValidateWorkflow(options), this);
    }

///////////////////////////////////////////////////////////////////////////////////////
// PRIVATE METHODS - Radio handlers
///////////////////////////////////////////////////////////////////////////////////////
    /**
     * Handle selection.
     */
    _handleEventBuilderSelected(options)
    {
        this._resourceAssignments = [];
        this._resourcesAvailable = [];
        this._addPorts = true;
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_LOAD_WORKFLOW, {&apos;workflow&apos;: options.workflow});
    }

    /**
     * Handle request set add ports.
     */
    _handleRequestSetAddPorts(options)
    {
        this._addPorts = options.addports;
    }

    /**
     * Handle request create WorkflowRun.
     */
    _handleRequestCreateWorkflowRun(options)
    {
        this._workflowRunOptions = {workflow: options.workflow, assignments: {}};
        var inputPortTypes = Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__GLOBAL_INPUTPORTTYPE_COLLECTION);
        var knownInputPorts = this._workflowRunOptions.workflow.get(&apos;workflow_input_ports&apos;).clone();
        for (var inputPortUrl in this._resourceAssignments)
        {
            // If our assignments for an InputPort are not needed, we just skip it.
            var inputPort = knownInputPorts.findWhere({url: inputPortUrl});
            if (!inputPort)
            {
                continue;
            }

            // If there is nothing for a given InputPort, error.
            this._workflowRunOptions.assignments[inputPortUrl] = [];
            var collection = this._getResourceAssignments(inputPortUrl);
            if (collection.length === 0)
            {
                alert(&apos;There are still unsatisfied Input Ports.&apos;);
                return;
            }

            // Get URLs.
            var resourceUrls = [];
            for (var i = 0; i &lt; collection.length; i++)
            {
                var resource = collection.at(i);
                resourceUrls.push(resource.get(&apos;url&apos;));
            } 

            // If the InputPort requires a ResourceList, we&apos;ll have to create one.
            // Else, just get the Resource URLs.
            var inputPortType = inputPortTypes.findWhere({url: inputPort.get(&apos;input_port_type&apos;)});
            if (inputPortType.get(&apos;is_list&apos;))
            {
                var resource = collection.at(0);
                var resourceType = resource.get(&apos;resource_type&apos;);
                var resourceList = new ResourceList();
                resourceList.set({resources: resourceUrls, resource_type: resourceType});
                this._workflowRunOptions.assignments[inputPortUrl] = resourceList;
            }
            else
            {
                this._workflowRunOptions.assignments[inputPortUrl] = resourceUrls;
            }

            // Finally, remove the InputPort from the cloned Collection.
            knownInputPorts.remove(inputPort);
        }

        // If we have anything left oveer in our cloned Collection, something is wrong.
        if (knownInputPorts.length &gt; 0)
        {
            alert(&apos;There are still unsatisfied Input Ports.&apos;);
        }
        else
        {
            this._attemptWorkflowRunCreation();
        }
    }

    /**
     * Handle request show Resource assignment view.
     */
    _handleRequestShowResourceAssignmentView(options)
    {
        // Create views.
        var inputPort = options.inputport;
        var assignedResources = this._getResourceAssignments(inputPort.get(&apos;url&apos;));
        var availableResources = this._getResourcesAvailable(inputPort);
        var assignedResourceView = new ViewResourceListAssigned({collection: assignedResources,
                                                                 childViewOptions: {inputport: inputPort, assigned: true, workflow: options.workflow}});
        var resourceListView = new ViewResourceListAvailable({collection: availableResources,
                                                              childViewOptions: {inputport: inputPort, assigned: false, workflow: options.workflow}});

        // Show the layout view.
        var view = new LayoutViewResourceAssignment({viewavailableresources: resourceListView, viewassignedresources: assignedResourceView});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: &apos;InputPort&apos;});
    }

    /**
     * Handles success of workflow fetch.
     */
    _handleWorkflowLoadSuccess(workflow)
    {
        this._processWorkflow(workflow);
        Radio.channel(&apos;rodan&apos;).trigger(RODAN_EVENTS.EVENT__WORKFLOWBUILDER_LOADED_WORKFLOW, {workflow: workflow});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: workflow});
    }

    /**
     * Handle request add workflow job.
     */
    _handleRequestAddWorkflowJob(options)
    {
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOB_CREATE, {job: options.job, workflow: options.workflow, addports: this._addPorts});
        Radio.channel(&apos;rodan&apos;).once(RODAN_EVENTS.EVENT__WORKFLOWJOB_CREATED, 
                               () =&gt; Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: options.workflow}));
    }

    /**
     * Handle command delete WorkflowJob.
     */
    _handleRequestDeleteWorkflowJob(options)
    {
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOB_DELETE, {workflowjob: options.workflowjob, workflow: options.workflow});
        Radio.channel(&apos;rodan&apos;).once(RODAN_EVENTS.EVENT__WORKFLOWJOB_DELETED, 
                               () =&gt; Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: options.workflow}));
    }

    /**
     * Handle command delete WorkflowJobGroup.
     */
    _handleRequestDeleteWorkflowJobGroup(options)
    {
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOBGROUP_DELETE, {workflowjobgroup: options.workflowjobgroup, workflow: options.workflow});
        Radio.channel(&apos;rodan&apos;).once(RODAN_EVENTS.EVENT__WORKFLOWJOBGROUP_DELETED, () =&gt; this._handleEventWorkflowJobGroupDelete(options.workflowjobgroup, options.workflow));
    }

    /**
     * Handle request delete Connection.
     */
    _handleRequestDeleteConnection(options)
    {
        options.connection.destroy({success: (model) =&gt; this._handleConnectionDeletionSuccess(options.connection, options.workflow)});
    }

    /**
     * Handle request import Workflow.
     */
    _handleRequestImportWorkflow(options)
    {
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOBGROUP_IMPORT, {origin: options.origin, target: options.target});
        Radio.channel(&apos;rodan&apos;).once(RODAN_EVENTS.EVENT__WORKFLOWJOBGROUP_IMPORTED, 
                               () =&gt; Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_LOAD_WORKFLOW, {workflow: options.target}));
    }

    /**
     * Handle add connection.
     */
    _handleCommandAddConnection(options)
    {
        this._createConnection(options.outputport, options.inputport, options.workflow);
    }

    /**
     * Create input port
     */
    _handleCommandAddInputPort(options)
    {
        var port = new InputPort({input_port_type: options.inputporttype.get(&apos;url&apos;), workflow_job: options.workflowjob.get(&apos;url&apos;)});
        port.save({}, {success: (model) =&gt; this._handleInputPortCreationSuccess(port, options.workflow, options.workflowjob)});
    }

    /**
     * Create output port
     */
    _handleCommandAddOutputPort(options)
    {
        var port = new OutputPort({output_port_type: options.outputporttype.get(&apos;url&apos;), workflow_job: options.workflowjob.get(&apos;url&apos;)});
        port.save({}, {success: (model) =&gt; this._handleOutputPortCreationSuccess(port, options.workflow, options.workflowjob, options.targetinputports)});
    }

    /**
     * Delete input port
     */
    _handleCommandDeleteInputPort(options)
    {
        options.inputport.destroy({success: (model) =&gt; this._handleInputPortDeletionSuccess(model, options.workflow, options.workflowjob)});
    }

    /**
     * Delete output port
     */
    _handleCommandDeleteOutputPort(options)
    {
        options.outputport.destroy({success: (model) =&gt; this._handleOutputPortDeletionSuccess(model, options.workflow, options.workflowjob)});
    }

    /**
     * Handle request load Workflow.
     */
    _handleEventLoadWorkflow(options)
    {
        options.workflow.fetch({&apos;success&apos;: (workflow) =&gt; this._handleWorkflowLoadSuccess(workflow)});
    }

    /**
     * Handle request validate Workflow.
     */
    _handleRequestValidateWorkflow(options)
    {
        this._validateWorkflow(options.workflow);  
    }

    /**
     * Handle request create distributor.
     */
    _handleRequestCreateDistributor(options)
    {
        var requiredResourceTypes = this._getCompatibleResourceTypeURLs(options.inputports);
        if (requiredResourceTypes.length &gt; 0)
        {
            var jobs = this._getCandidateResourceDistributorJobs(requiredResourceTypes);
            if (jobs.length &gt; 0)
            {
                // TODO - offer list
                var targetInputPorts = [];
                for (var index in options.inputports)
                {
                    var inputPort = options.inputports[index];
                    targetInputPorts.push(options.workflow.get(&apos;workflow_input_ports&apos;).get(inputPort.id));
                }
                Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOB_CREATE, {job: jobs[0], 
                                                                               workflow: options.workflow, 
                                                                               addports: true,
                                                                               targetinputports: targetInputPorts});
            }
        }
    }

    /**
     * Handle request WorkflowJobGroup ungroup.
     */
    _handleRequestWorkflowJobGroupUngroup(options)
    {
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOBGROUP_DELETE, {workflowjobgroup: options.workflowjobgroup, workflow: options.workflow});
    }

    /**
     * Handle request add WorkflowJobGroup.
     */
    _handleRequestAddWorkflowJobGroup(options)
    {
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOBGROUP_CREATE, {workflowjobs: options.workflowjobs, workflow: options.workflow});
    }

    /**
     * Handle request assign Resource to InputPort.
     */
    _handleRequestAssignResource(options)
    {
        var url = options.inputport.get(&apos;url&apos;);
        var resourcesAssigned = this._getResourceAssignments(url);
        var multipleUrl = this._getInputPortURLWithMultipleAssignments();
        if (multipleUrl &amp;&amp; resourcesAssigned.length &gt; 0 &amp;&amp; multipleUrl !== url)
        {
            alert(&apos;Only one InputPort may have multiple Resources assigned to it.&apos;);
            return;
        }
        resourcesAssigned.add(options.resource);
    }

    /**
     * Handle request unassigne Resource from InputPort.
     */
    _handleRequestUnassignResource(options)
    {
        var resourcesAssigned = this._getResourceAssignments(options.inputport.get(&apos;url&apos;));
        resourcesAssigned.remove(options.resource);
    }

    /**
     * Handle request get Resource assignments.
     */
    _handleRequestGetResourceAssignments(options)
    {
        return this._getResourceAssignments(options.inputport.get(&apos;url&apos;));
    }

    /**
     * Handle request get Workflow view.
     */
    _handleRequestShowWorkflowView(options)
    {
        var view = new ViewWorkflow({template: &apos;#template-main_workflow_individual_edit&apos;, model: options.workflow});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: &apos;Workflow&apos;});
    }

    /**
     * Handle request get WorkflowJob view.
     */
    _handleRequestShowWorkflowJobView(options)
    {
        var view = new ViewControlWorkflowJob({model: options.workflowjob, workflow: options.workflow});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: options.workflowjob.get(&apos;name&apos;)});
    }

    /**
     * Handle request show Job list view.
     */
    _handleRequestShowJobListView(options)
    {
        var collection = new JobCollection();
        collection.fetch();
        var view = new ViewJobList({collection: collection, childViewOptions: {workflow: options.workflow}});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: &apos;Jobs&apos;});
    }

    /**
     * Handle request show Workflow list view.
     */
    _handleRequestShowWorkflowListView(options)
    {
        var collection = new WorkflowCollection();
        collection.fetch({data: {/*project: project.id, */valid: &apos;True&apos;}});
        var project = Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__PROJECT_GET_ACTIVE);
        var view = new ViewWorkflowList({collection: collection,
                                         childView: ViewWorkflowListImportItem,
                                         template: &apos;#template-main_workflow_list_import&apos;,
                                         childViewOptions: {workflow: options.workflow}});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: &apos;Workflows&apos;});
    }

    /**
     * Handle request show WorkflowJobGroup view.
     */
    _handleRequestShowWorkflowJobGroupView(options)
    {
        var view = new ViewWorkflowJobGroup({workflow: options.workflow, workflowjobgroup: options.workflowjobgroup});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: &apos;Workflow Job Group&apos;});
    }

    /**
     * Handle request show WorkflowJob ports view.
     */
    _handleRequestShowWorkflowJobPortsView(options)
    {
        var view = new LayoutViewControlPorts(options);
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: &apos;WorkflowJob Ports&apos;});
    }

    /**
     * Handle request show WorkflowJob settings view.
     */
    _handleRequestShowWorkflowJobSettingsView(options)
    {
        var view = new ViewSettings({workflow: options.workflow, model: options.workflowjob});
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__MODAL_SHOW, {view: view, title: &apos;WorkflowJob Settings&apos;});
    }

    /**
     * Handle WorkflowJobGroup delete success. This will remove associated WorkflowJobs.
     */
    _handleEventWorkflowJobGroupDelete(workflowJobGroup, workflow)
    {
        var workflowJobs = workflowJobGroup.get(&apos;workflow_jobs&apos;);
        for (var index in workflowJobs)
        {
            var workflowJob = workflow.get(&apos;workflow_jobs&apos;).findWhere({url: workflowJobs[index]});
            Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_REMOVE_WORKFLOWJOB, {workflowjob: workflowJob, workflow: workflow});
        }
    }

///////////////////////////////////////////////////////////////////////////////////////
// PRIVATE METHODS - REST response handlers
///////////////////////////////////////////////////////////////////////////////////////
    /**
     * Handle ResourceList creation success.
     */
    _handleResourceListCreationSuccess(model, inputPortUrl)
    {
        this._workflowRunOptions.assignments[inputPortUrl] = [model.get(&apos;url&apos;)];
        this._attemptWorkflowRunCreation();
    }

    /**
     * Handle ResourceList creation error.
     */
    _handleResourceListCreationError()
    {
        // todo - need something here
    }

    /**
     * Handle InputPort creation success.
     */
    _handleInputPortCreationSuccess(model, workflow, workflowJob)
    {
        workflow.get(&apos;workflow_input_ports&apos;).add(model);
        workflowJob.get(&apos;input_ports&apos;).add(model);
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: workflow});
    }

    /**
     * Handle OutputPort creation success.
     */
    _handleOutputPortCreationSuccess(model, workflow, workflowJob, targetInputPorts)
    {
        workflow.get(&apos;workflow_output_ports&apos;).add(model);
        workflowJob.get(&apos;output_ports&apos;).add(model);
        for (var index in targetInputPorts)
        {
            this._createConnection(model, targetInputPorts[index], workflow);
        }
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: workflow});
    }

    /**
     * Handles success of Connection creation.
     */
    _handleConnectionCreationSuccess(model, workflow, inputPort, outputPort)
    {
        workflow.get(&apos;connections&apos;).add(model);
        inputPort.fetch(); // to get populated Connection array
        outputPort.fetch(); // to get populated Connection array
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: workflow});
    }

    /**
     * Handle InputPort deletion success.
     */
    _handleInputPortDeletionSuccess(model, workflow, workflowJob)
    {
        workflowJob.get(&apos;input_ports&apos;).remove(model);
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: workflow});
    }

    /**
     * Handle OutputPort deletion success.
     */
    _handleOutputPortDeletionSuccess(model, workflow, workflowJob)
    {
        workflowJob.get(&apos;output_ports&apos;).remove(model);
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: workflow});
    }

    /**
     * Handle Connection deletion success.
     */
    _handleConnectionDeletionSuccess(model, workflow)
    {
        workflow.get(&apos;connections&apos;).remove(model);
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWBUILDER_VALIDATE_WORKFLOW, {workflow: workflow});
    }

    /**
     * Handle validation failure.
     */
    _handleValidationFailure(model, response, options)
    {
        model.set({&apos;valid&apos;: false});
        Radio.channel(&apos;rodan&apos;).trigger(RODAN_EVENTS.EVENT__WORKFLOWBUILDER_VALIDATED_WORKFLOW, {workflow: model});
    }

///////////////////////////////////////////////////////////////////////////////////////
// PRIVATE METHODS
///////////////////////////////////////////////////////////////////////////////////////
    /**
     * Create connection.
     */
    _createConnection(outputPort, inputPort, workflow)
    {
        var connection = new Connection({input_port: inputPort.get(&apos;url&apos;), output_port: outputPort.get(&apos;url&apos;)});
        connection.save({}, {success: (model) =&gt; this._handleConnectionCreationSuccess(model, workflow, inputPort, outputPort)});
    }

    /**
     * Process workflow for GUI.
     */
    _processWorkflow(workflow)
    {
        // Process all WorkflowJobs and their associated ports.
        var connections = {};
        var workflowJobs = workflow.get(&apos;workflow_jobs&apos;);
        if (workflowJobs !== undefined)
        {
            for (var i = 0; i &lt; workflowJobs.length; i++)
            {
                // Create WorkflowJob item then process connections.
                var workflowJob = workflowJobs.at(i);
                var tempConnections = this._processWorkflowJob(workflowJob);

                // For the connections returned, merge them into our master list.
                for (var connectionUrl in tempConnections)
                {
                    var connection = tempConnections[connectionUrl];
                    if (connections.hasOwnProperty(connectionUrl))
                    {
                        connections[connectionUrl].inputPort = 
                            connections[connectionUrl].inputPort === null ? connection.inputPort : connections[connectionUrl].inputPort;
                        connections[connectionUrl].outputPort = 
                            connections[connectionUrl].outputPort === null ? connection.outputPort : connections[connectionUrl].outputPort;
                    }
                    else
                    {
                        connections[connectionUrl] = connection;
                    }
                }
            }
        }

        // Process connections.
        for (var connectionUrl in connections)
        { 
            var connection = connections[connectionUrl];
            var connectionModel = new Connection({input_port: connection.inputPort.get(&apos;url&apos;), 
                                                  output_port: connection.outputPort.get(&apos;url&apos;),
                                                  url: connectionUrl});

            // TODO - better way to get connections?
            var connectionId = connectionModel.parseIdFromUrl(connectionUrl);
            connectionModel.set({uuid: connectionId});
            connectionModel.fetch();
            workflow.get(&apos;connections&apos;).add(connectionModel);
        }

        // Finally inport the WorkflowJobGroups. 
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWJOBGROUP_LOAD_COLLECTION, {workflow: workflow});
    }

    /**
     * Process workflow job for GUI.
     */
    _processWorkflowJob(model)
    {
        // We want to keep track of what connections need to be made and return those.
        var connections = {};

        // Process input ports.
        var inputPorts = model.get(&apos;input_ports&apos;);
        if (inputPorts !== undefined)
        {
            for (var i = 0; i &lt; inputPorts.length; i++)
            {
                var inputPort = inputPorts.at(i);

                // Get connections.
                var inputPortConnections = inputPort.get(&apos;connections&apos;);
                for (var k = 0; k &lt; inputPortConnections.length; k++)
                {
                    var connection = inputPortConnections[k];
                    connections[connection] = {&apos;inputPort&apos;: inputPort, &apos;outputPort&apos;: null};
                }
            }
        }

        // Process output ports.
        var outputPorts = model.get(&apos;output_ports&apos;);
        if (outputPorts !== undefined)
        {
            for (var j = 0; j &lt; outputPorts.length; j++)
            {
                var outputPort = outputPorts.at(j);

                // Get connections.
                var outputPortConnections = outputPort.get(&apos;connections&apos;);
                for (var k = 0; k &lt; outputPortConnections.length; k++)
                {
                    var connection = outputPortConnections[k];
                    connections[connection] = {&apos;inputPort&apos;: null, &apos;outputPort&apos;: outputPort};
                }
            }
        }

        return connections;
    }

    /**
     * Attempts to validate Workflow.
     */
    _validateWorkflow(workflow)
    {
        workflow.save({valid: true}, {patch: true,
                                      success: (model) =&gt; Radio.channel(&apos;rodan&apos;).trigger(RODAN_EVENTS.EVENT__WORKFLOWBUILDER_VALIDATED_WORKFLOW, {workflow: model}),
                                      error: (model, response, options) =&gt; this._handleValidationFailure(model, response, options)});
    }

    /**
     * Given an array of InputPorts, returns an array of ResourceType URLs that
     * would satisfy the InputPorts.
     */
    _getCompatibleResourceTypeURLs(inputPorts)
    {
        var resourceTypes = [];
        var inputPortTypes = Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__GLOBAL_INPUTPORTTYPE_COLLECTION);
        for (var index in inputPorts)
        {
            // Get the available resource types.
            var inputPort = inputPorts[index];
            var inputPortTypeURL = inputPort.get(&apos;input_port_type&apos;);
            var inputPortType = inputPortTypes.findWhere({url: inputPortTypeURL});
            var inputPortResourceTypes = inputPortType.get(&apos;resource_types&apos;);

            // If this is the first iteration, set the array. Else, do an intersection.
            if (resourceTypes.length === 0)
            {
                resourceTypes = inputPortResourceTypes;
            }
            resourceTypes = _.intersection(resourceTypes, inputPortResourceTypes);
        }
        return resourceTypes;
    }

    /**
     * Given an array of ResourceType URLs, finds jobs that both give at least one and take at least
     * one of the ResourceTypes. The returned array {job: Job, inputporttypes: URL strings, outputporttypes: URL string}.
     * The port types are those ports of the associated Job that will satisfy the resource requirements.
     */
    _getCandidateResourceDistributorJobs(resourceTypes)
    {
        var jobs = Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__GLOBAL_JOB_COLLECTION).where({category: Configuration.RESOURCE_DISTRIBUTOR_CATEGORY});
        var satisfiableJobs = [];
        for (var i = 0; i &lt; jobs.length; i++)
        {
            var job = jobs[i];
            var inputPortType = job.get(&apos;input_port_types&apos;).at(0);
            var outputPortType = job.get(&apos;output_port_types&apos;).at(0);

            // Intersect against InputPortType ResourceTypes.
            var intersect = _.intersection(resourceTypes, inputPortType.get(&apos;resource_types&apos;));
            if (intersect.length === 0)
            {
                continue;
            }

            intersect = _.intersection(resourceTypes, outputPortType.get(&apos;resource_types&apos;));
            if (intersect.length === 0)
            {
                continue;
            }
            
            // We want to keep this job.
            satisfiableJobs.push(job);
        }
        return satisfiableJobs;
    }

    /**
     * Return InputPort URL that has multiple assignments.
     * Returns null if DNE.
     */
    _getInputPortURLWithMultipleAssignments()
    {
        for (var inputPortUrl in this._resourceAssignments)
        {
            var resourceAssignments = this._getResourceAssignments(inputPortUrl);
            if (resourceAssignments.length &gt; 1)
            {
                return inputPortUrl;
            }
        }
        return null;
    }

    /**
     * Returns resource assignment for given InputPort url.
     */
    _getResourceAssignments(inputPortUrl)
    {
        if (!this._resourceAssignments[inputPortUrl])
        {
            this._resourceAssignments[inputPortUrl] = new BaseCollection(null, {model: Resource});
        }
        return this._resourceAssignments[inputPortUrl];
    }

    /**
     * Returns resources available for given InputPort.
     */
    _getResourcesAvailable(inputPort)
    {
        if (!this._resourcesAvailable[inputPort.get(&apos;url&apos;)])
        {
            var project = Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__PROJECT_GET_ACTIVE);
            var resourceTypeURLs = this._getCompatibleResourceTypeURLs([inputPort]);
            var data = {project: project.id, resource_type__in: &apos;&apos;};
            var globalResourceTypes = Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__GLOBAL_RESOURCETYPE_COLLECTION);
            var first = true;
            for (var index in resourceTypeURLs)
            {
                var idString = null;
                if (first)
                {
                    first = false;
                    idString = globalResourceTypes.findWhere({url: resourceTypeURLs[index]}).id;
                }
                else
                {
                    idString = &apos;,&apos; + globalResourceTypes.findWhere({url: resourceTypeURLs[index]}).id;
                }
                data.resource_type__in = data.resource_type__in + idString;
            }
            this._resourcesAvailable[inputPort.get(&apos;url&apos;)] = new ResourceCollection();
            this._resourcesAvailable[inputPort.get(&apos;url&apos;)].fetch({data: data});
        }
        this._resourcesAvailable[inputPort.get(&apos;url&apos;)].syncList();
        return this._resourcesAvailable[inputPort.get(&apos;url&apos;)];
    }

    /**
     * Check WorkflowRun Resource assignments.
     *
     * This method checks if any Resource assignments are ResourceLists.
     * If there are and the ResourceList has no ID, it saves the list and waits for a response.
     * If it has an ID, it replaces the object with the URL for that ResourceList.
     * If a reference is just to an array of REsource refs, it is ignored.
     *
     * If everything checks out create the WorkflowRun and return true. Else return false.
     */
    _attemptWorkflowRunCreation()
    {
        for (var inputPortUrl in this._workflowRunOptions.assignments)
        {
            var assignments = this._workflowRunOptions.assignments[inputPortUrl];
            if (assignments instanceof ResourceList &amp;&amp; !assignments.id)
            {
                // TODO - shitty way to do this; once I do a &quot;save&quot;, I don&apos;t do another; this ensures that &apos;inputPortUrl&apos;
                // doesn&apos;t get set to the last one in the loop
                assignments.save({}, {success: (model) =&gt; this._handleResourceListCreationSuccess(model, inputPortUrl),
                                       error: () =&gt; this._handleResourceListCreationError()});
                return false;
            }
        }
        Radio.channel(&apos;rodan&apos;).request(RODAN_EVENTS.REQUEST__WORKFLOWRUN_CREATE, this._workflowRunOptions);
        return true;
    }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.7)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
